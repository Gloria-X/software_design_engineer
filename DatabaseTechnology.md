# 数据库技术基础

## 概述

数据：是数据库中存储的基本对象，是描述事物的符号记录。

数据的种类：文本、图形、图像、音频、视频。（一切信息化的东西都是数据）

数据库DB：长期存储在计算机内、有组织的、可共享的大量数据的集合

数据库的基本特征：数据按一定的数据模型组织（现在主流的数据库都是关系模型，有行有列有表）、描述和存储；可为各种用户共享；冗余度较小；数据独立性较高；易扩展

数据库系统DB：是一个采用了数据库技术，有组织地、动态地存储大量相关数据，方便多用户访问的**计算机系统**。其由下面四个部分组成：数据库（统一管理、长期存储在计算机内的，有组织的相关数据的集合）、硬件（构成计算机系统包括存储数据所需的外部设备）、软件（操作系统、**数据库管理系统**及应用程序）、人员（系统分析和数据库设计人员、应用程序员、最终用户、数据库管理员DBA）。

**数据库管理系统**DBMS（属于数据库系统的软件）的功能：实现对共享数据有效的组织、管理和存取。包括数据定义、数据库操作、数据库运行管理、数据的存储管理、数据库的建立和维护等。

## 三级模式-两级映像

内模式：管理如何存储**物理的数据**，对应具体**物理存储文件**

模式：又称为概念模式，就是我们通常使用的**基本表**，根据应用、需求将物理数据划分成一张张表。

外模式：对应数据库中的**视图**这个级别，将表进行一定的处理后再提供给用户使用

外模式-模式映像（保证数据的**逻辑独立性**）：是表和视图之间的映射，存在于概念级和外部级之间，若表中数据发生了修改，只需要修改此映射，而无需修改应用程序。

模式-内模式映像（保证了数据的**物理独立性**）：是表和数据的物理存储之间的映射存在于概念级和内部级之间，若修改了数据存储方式，只需要修改此映射，而不需要去修改应用程序。

> 映像目的：为了数据库中数据改变的时候，应用程序无需改变

![三级模式](./imgs/4.1-三级模式.jpg)

## 数据库设计

🔺 流程、干什么了、产出

需求分析：即分析数据存储的要求，**产出物有数据流图数据字典、需求说明书**。

概念结构设计：就是**设计E-R图**，也即实体-联系图，与物理实现无关，说明有哪些实体，实体有哪些属性。

逻辑结构设计：**将E-R图，转换成关系模式**，也即转换成实际的表和表中的列属性，这里要考虑很多**规范化**的东西。

物理设计：根据生成的表等概念，**生成物理数据库**。 

![数据库设计](./imgs/4.1-数据库设计.png)

## 数据模型

- **关系模型是二维表的形式表示的实体-联系模型**，是将实体-联系模型转换而来的，经过开发人员设计的；

- **概念模型是从用户的角度进行建模**的（ER图），是现实世界到信息世界的第一抽象是真正的实体-联系模型。

- 网状模型表示实体类型及其实体之间的联系，一个事物和另外几个都有联系形成一张网。

- 面向对象模型是采用面向对象的方法设计数据库，以对象为单位，每个对象包括属性和方法，具有类和继承等特点。

🔺数据模型三要素：**数据结构**（所研究的对象类型的集合）、**数据操作**（增删改查，对数据库中各种对象的实例允许执行的操作的集合）、**数据的约束条件**（一组完整性规则的集合，年龄 < 150 之类的）。

### 🔺E-R 图

用E-R图来描述概念数据模型，世界是由一组称作实体的基本对象和这些对象之间的联系构成的。

在E-R模型中，使用**椭圆表示属性**（一般没有）、**长方形表示实体**、**菱形表示联系**，**联系的两端要填写联系类型**，示例如下图：

![ER图](./imgs/4.1-ER图.jpg)

实体：**客观存在并可相互区别的事物**。可以是具体的人、事、物或抽象概念如人、汽车、图书、账户、贷款。

弱实体和强实体：弱实体依赖于强实体的存在而存在（通过上图圆圈连接，“经理”、“部门经理”就是弱实体）

实体集：具有相同类型和共享相同属性的实体的集合，如学生、课程

属性：**实体所具有的特性**

属性分类：简单属性和复合属性（由多个简单属性组成的，e.g.家庭住址：国家+省份+市+街道...）；单值属性和多值属性；NULL属性；派生属性（可由其他属性计算得来）

域：属性的取值范围称为该属性的域

码（key）：唯一标识实体的属性集（键）。

联系：现实世界中**事物内部以及事物之间的联系**，在E-R图中反映为**实体内部的联系和实体之间的联系**。

联系类型：**一对一1:1、一对多1:N、多对多M:N**。









































